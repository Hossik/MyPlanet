{"ast":null,"code":"\"use strict\";\n\nvar userAgent = global.navigator && global.navigator.userAgent;\nvar isRunningInIE = userAgent && userAgent.indexOf(\"MSIE \") > -1; // Make properties writable in IE, as per\n// http://www.adequatelygood.com/Replacing-setTimeout-Globally.html\n\nif (isRunningInIE) {\n  global.setTimeout = global.setTimeout;\n  global.clearTimeout = global.clearTimeout;\n  global.setInterval = global.setInterval;\n  global.clearInterval = global.clearInterval;\n  global.Date = global.Date;\n} // setImmediate is not a standard function\n// avoid adding the prop to the window object if not present\n\n\nif (global.setImmediate !== undefined) {\n  global.setImmediate = global.setImmediate;\n  global.clearImmediate = global.clearImmediate;\n} // node expects setTimeout/setInterval to return a fn object w/ .ref()/.unref()\n// browsers, a number.\n// see https://github.com/cjohansen/Sinon.JS/pull/436\n\n\nvar NOOP = function () {\n  return undefined;\n};\n\nvar timeoutResult = setTimeout(NOOP, 0);\nvar addTimerReturnsObject = typeof timeoutResult === \"object\";\nvar hrtimePresent = global.process && typeof global.process.hrtime === \"function\";\nclearTimeout(timeoutResult);\nvar NativeDate = Date;\nvar uniqueTimerId = 1;\n/**\n * Parse strings like \"01:10:00\" (meaning 1 hour, 10 minutes, 0 seconds) into\n * number of milliseconds. This is used to support human-readable strings passed\n * to clock.tick()\n */\n\nfunction parseTime(str) {\n  if (!str) {\n    return 0;\n  }\n\n  var strings = str.split(\":\");\n  var l = strings.length;\n  var i = l;\n  var ms = 0;\n  var parsed;\n\n  if (l > 3 || !/^(\\d\\d:){0,2}\\d\\d?$/.test(str)) {\n    throw new Error(\"tick only understands numbers, 'm:s' and 'h:m:s'. Each part must be two digits\");\n  }\n\n  while (i--) {\n    parsed = parseInt(strings[i], 10);\n\n    if (parsed >= 60) {\n      throw new Error(\"Invalid time \" + str);\n    }\n\n    ms += parsed * Math.pow(60, l - i - 1);\n  }\n\n  return ms * 1000;\n}\n/**\n * Floor function that also works for negative numbers\n */\n\n\nfunction fixedFloor(n) {\n  return n >= 0 ? Math.floor(n) : Math.ceil(n);\n}\n/**\n * % operator that also works for negative numbers\n */\n\n\nfunction fixedModulo(n, m) {\n  return (n % m + m) % m;\n}\n/**\n * Used to grok the `now` parameter to createClock.\n */\n\n\nfunction getEpoch(epoch) {\n  if (!epoch) {\n    return 0;\n  }\n\n  if (typeof epoch.getTime === \"function\") {\n    return epoch.getTime();\n  }\n\n  if (typeof epoch === \"number\") {\n    return epoch;\n  }\n\n  throw new TypeError(\"now should be milliseconds since UNIX epoch\");\n}\n\nfunction inRange(from, to, timer) {\n  return timer && timer.callAt >= from && timer.callAt <= to;\n}\n\nfunction mirrorDateProperties(target, source) {\n  var prop;\n\n  for (prop in source) {\n    if (source.hasOwnProperty(prop)) {\n      target[prop] = source[prop];\n    }\n  } // set special now implementation\n\n\n  if (source.now) {\n    target.now = function now() {\n      return target.clock.now;\n    };\n  } else {\n    delete target.now;\n  } // set special toSource implementation\n\n\n  if (source.toSource) {\n    target.toSource = function toSource() {\n      return source.toSource();\n    };\n  } else {\n    delete target.toSource;\n  } // set special toString implementation\n\n\n  target.toString = function toString() {\n    return source.toString();\n  };\n\n  target.prototype = source.prototype;\n  target.parse = source.parse;\n  target.UTC = source.UTC;\n  target.prototype.toUTCString = source.prototype.toUTCString;\n  return target;\n}\n\nfunction createDate() {\n  function ClockDate(year, month, date, hour, minute, second, ms) {\n    // Defensive and verbose to avoid potential harm in passing\n    // explicit undefined when user does not pass argument\n    switch (arguments.length) {\n      case 0:\n        return new NativeDate(ClockDate.clock.now);\n\n      case 1:\n        return new NativeDate(year);\n\n      case 2:\n        return new NativeDate(year, month);\n\n      case 3:\n        return new NativeDate(year, month, date);\n\n      case 4:\n        return new NativeDate(year, month, date, hour);\n\n      case 5:\n        return new NativeDate(year, month, date, hour, minute);\n\n      case 6:\n        return new NativeDate(year, month, date, hour, minute, second);\n\n      default:\n        return new NativeDate(year, month, date, hour, minute, second, ms);\n    }\n  }\n\n  return mirrorDateProperties(ClockDate, NativeDate);\n}\n\nfunction addTimer(clock, timer) {\n  if (timer.func === undefined) {\n    throw new Error(\"Callback must be provided to timer calls\");\n  }\n\n  if (!clock.timers) {\n    clock.timers = {};\n  }\n\n  timer.id = uniqueTimerId++;\n  timer.createdAt = clock.now;\n  timer.callAt = clock.now + (parseInt(timer.delay) || (clock.duringTick ? 1 : 0));\n  clock.timers[timer.id] = timer;\n\n  if (addTimerReturnsObject) {\n    return {\n      id: timer.id,\n      ref: NOOP,\n      unref: NOOP\n    };\n  }\n\n  return timer.id;\n}\n/* eslint consistent-return: \"off\" */\n\n\nfunction compareTimers(a, b) {\n  // Sort first by absolute timing\n  if (a.callAt < b.callAt) {\n    return -1;\n  }\n\n  if (a.callAt > b.callAt) {\n    return 1;\n  } // Sort next by immediate, immediate timers take precedence\n\n\n  if (a.immediate && !b.immediate) {\n    return -1;\n  }\n\n  if (!a.immediate && b.immediate) {\n    return 1;\n  } // Sort next by creation time, earlier-created timers take precedence\n\n\n  if (a.createdAt < b.createdAt) {\n    return -1;\n  }\n\n  if (a.createdAt > b.createdAt) {\n    return 1;\n  } // Sort next by id, lower-id timers take precedence\n\n\n  if (a.id < b.id) {\n    return -1;\n  }\n\n  if (a.id > b.id) {\n    return 1;\n  } // As timer ids are unique, no fallback `0` is necessary\n\n}\n\nfunction firstTimerInRange(clock, from, to) {\n  var timers = clock.timers;\n  var timer = null;\n  var id, isInRange;\n\n  for (id in timers) {\n    if (timers.hasOwnProperty(id)) {\n      isInRange = inRange(from, to, timers[id]);\n\n      if (isInRange && (!timer || compareTimers(timer, timers[id]) === 1)) {\n        timer = timers[id];\n      }\n    }\n  }\n\n  return timer;\n}\n\nfunction firstTimer(clock) {\n  var timers = clock.timers;\n  var timer = null;\n  var id;\n\n  for (id in timers) {\n    if (timers.hasOwnProperty(id)) {\n      if (!timer || compareTimers(timer, timers[id]) === 1) {\n        timer = timers[id];\n      }\n    }\n  }\n\n  return timer;\n}\n\nfunction lastTimer(clock) {\n  var timers = clock.timers;\n  var timer = null;\n  var id;\n\n  for (id in timers) {\n    if (timers.hasOwnProperty(id)) {\n      if (!timer || compareTimers(timer, timers[id]) === -1) {\n        timer = timers[id];\n      }\n    }\n  }\n\n  return timer;\n}\n\nfunction callTimer(clock, timer) {\n  var exception;\n\n  if (typeof timer.interval === \"number\") {\n    clock.timers[timer.id].callAt += timer.interval;\n  } else {\n    delete clock.timers[timer.id];\n  }\n\n  try {\n    if (typeof timer.func === \"function\") {\n      timer.func.apply(null, timer.args);\n    } else {\n      /* eslint no-eval: \"off\" */\n      eval(timer.func);\n    }\n  } catch (e) {\n    exception = e;\n  }\n\n  if (!clock.timers[timer.id]) {\n    if (exception) {\n      throw exception;\n    }\n\n    return;\n  }\n\n  if (exception) {\n    throw exception;\n  }\n}\n\nfunction timerType(timer) {\n  if (timer.immediate) {\n    return \"Immediate\";\n  }\n\n  if (timer.interval !== undefined) {\n    return \"Interval\";\n  }\n\n  return \"Timeout\";\n}\n\nfunction clearTimer(clock, timerId, ttype) {\n  if (!timerId) {\n    // null appears to be allowed in most browsers, and appears to be\n    // relied upon by some libraries, like Bootstrap carousel\n    return;\n  }\n\n  if (!clock.timers) {\n    clock.timers = [];\n  } // in Node, timerId is an object with .ref()/.unref(), and\n  // its .id field is the actual timer id.\n\n\n  if (typeof timerId === \"object\") {\n    timerId = timerId.id;\n  }\n\n  if (clock.timers.hasOwnProperty(timerId)) {\n    // check that the ID matches a timer of the correct type\n    var timer = clock.timers[timerId];\n\n    if (timerType(timer) === ttype) {\n      delete clock.timers[timerId];\n    } else {\n      throw new Error(\"Cannot clear timer: timer created with set\" + timerType(timer) + \"() but cleared with clear\" + ttype + \"()\");\n    }\n  }\n}\n\nfunction uninstall(clock, target) {\n  var method, i, l;\n  var installedHrTime = \"_hrtime\";\n\n  for (i = 0, l = clock.methods.length; i < l; i++) {\n    method = clock.methods[i];\n\n    if (method === \"hrtime\" && target.process) {\n      target.process.hrtime = clock[installedHrTime];\n    } else {\n      if (target[method] && target[method].hadOwnProperty) {\n        target[method] = clock[\"_\" + method];\n      } else {\n        try {\n          delete target[method];\n        } catch (ignore) {\n          /* eslint empty-block: \"off\" */\n        }\n      }\n    }\n  } // Prevent multiple executions which will completely remove these props\n\n\n  clock.methods = [];\n}\n\nfunction hijackMethod(target, method, clock) {\n  var prop;\n  clock[method].hadOwnProperty = Object.prototype.hasOwnProperty.call(target, method);\n  clock[\"_\" + method] = target[method];\n\n  if (method === \"Date\") {\n    var date = mirrorDateProperties(clock[method], target[method]);\n    target[method] = date;\n  } else {\n    target[method] = function () {\n      return clock[method].apply(clock, arguments);\n    };\n\n    for (prop in clock[method]) {\n      if (clock[method].hasOwnProperty(prop)) {\n        target[method][prop] = clock[method][prop];\n      }\n    }\n  }\n\n  target[method].clock = clock;\n}\n\nvar timers = {\n  setTimeout: setTimeout,\n  clearTimeout: clearTimeout,\n  setImmediate: global.setImmediate,\n  clearImmediate: global.clearImmediate,\n  setInterval: setInterval,\n  clearInterval: clearInterval,\n  Date: Date\n};\n\nif (hrtimePresent) {\n  timers.hrtime = global.process.hrtime;\n}\n\nvar keys = Object.keys || function (obj) {\n  var ks = [];\n  var key;\n\n  for (key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      ks.push(key);\n    }\n  }\n\n  return ks;\n};\n\nexports.timers = timers;\n\nfunction createClock(now, loopLimit) {\n  loopLimit = loopLimit || 1000;\n  var clock = {\n    now: getEpoch(now),\n    hrNow: 0,\n    timeouts: {},\n    Date: createDate(),\n    loopLimit: loopLimit\n  };\n  clock.Date.clock = clock;\n\n  clock.setTimeout = function setTimeout(func, timeout) {\n    return addTimer(clock, {\n      func: func,\n      args: Array.prototype.slice.call(arguments, 2),\n      delay: timeout\n    });\n  };\n\n  clock.clearTimeout = function clearTimeout(timerId) {\n    return clearTimer(clock, timerId, \"Timeout\");\n  };\n\n  clock.setInterval = function setInterval(func, timeout) {\n    return addTimer(clock, {\n      func: func,\n      args: Array.prototype.slice.call(arguments, 2),\n      delay: timeout,\n      interval: timeout\n    });\n  };\n\n  clock.clearInterval = function clearInterval(timerId) {\n    return clearTimer(clock, timerId, \"Interval\");\n  };\n\n  clock.setImmediate = function setImmediate(func) {\n    return addTimer(clock, {\n      func: func,\n      args: Array.prototype.slice.call(arguments, 1),\n      immediate: true\n    });\n  };\n\n  clock.clearImmediate = function clearImmediate(timerId) {\n    return clearTimer(clock, timerId, \"Immediate\");\n  };\n\n  clock.tick = function tick(ms) {\n    ms = typeof ms === \"number\" ? ms : parseTime(ms);\n    var tickFrom = clock.now;\n    var tickTo = clock.now + ms;\n    var previous = clock.now;\n    var timer = firstTimerInRange(clock, tickFrom, tickTo);\n    var oldNow, firstException;\n    clock.duringTick = true;\n\n    function updateHrTime(newNow) {\n      clock.hrNow += newNow - clock.now;\n    }\n\n    while (timer && tickFrom <= tickTo) {\n      if (clock.timers[timer.id]) {\n        updateHrTime(timer.callAt);\n        tickFrom = timer.callAt;\n        clock.now = timer.callAt;\n\n        try {\n          oldNow = clock.now;\n          callTimer(clock, timer); // compensate for any setSystemTime() call during timer callback\n\n          if (oldNow !== clock.now) {\n            tickFrom += clock.now - oldNow;\n            tickTo += clock.now - oldNow;\n            previous += clock.now - oldNow;\n          }\n        } catch (e) {\n          firstException = firstException || e;\n        }\n      }\n\n      timer = firstTimerInRange(clock, previous, tickTo);\n      previous = tickFrom;\n    }\n\n    clock.duringTick = false;\n    updateHrTime(tickTo);\n    clock.now = tickTo;\n\n    if (firstException) {\n      throw firstException;\n    }\n\n    return clock.now;\n  };\n\n  clock.next = function next() {\n    var timer = firstTimer(clock);\n\n    if (!timer) {\n      return clock.now;\n    }\n\n    clock.duringTick = true;\n\n    try {\n      clock.now = timer.callAt;\n      callTimer(clock, timer);\n      return clock.now;\n    } finally {\n      clock.duringTick = false;\n    }\n  };\n\n  clock.runAll = function runAll() {\n    var numTimers, i;\n\n    for (i = 0; i < clock.loopLimit; i++) {\n      if (!clock.timers) {\n        return clock.now;\n      }\n\n      numTimers = Object.keys(clock.timers).length;\n\n      if (numTimers === 0) {\n        return clock.now;\n      }\n\n      clock.next();\n    }\n\n    throw new Error(\"Aborting after running \" + clock.loopLimit + \" timers, assuming an infinite loop!\");\n  };\n\n  clock.runToLast = function runToLast() {\n    var timer = lastTimer(clock);\n\n    if (!timer) {\n      return clock.now;\n    }\n\n    return clock.tick(timer.callAt);\n  };\n\n  clock.reset = function reset() {\n    clock.timers = {};\n  };\n\n  clock.setSystemTime = function setSystemTime(systemTime) {\n    // determine time difference\n    var newNow = getEpoch(systemTime);\n    var difference = newNow - clock.now;\n    var id, timer; // update 'system clock'\n\n    clock.now = newNow; // update timers and intervals to keep them stable\n\n    for (id in clock.timers) {\n      if (clock.timers.hasOwnProperty(id)) {\n        timer = clock.timers[id];\n        timer.createdAt += difference;\n        timer.callAt += difference;\n      }\n    }\n  };\n\n  if (hrtimePresent) {\n    clock.hrtime = function (prev) {\n      if (Array.isArray(prev)) {\n        var oldSecs = prev[0] + prev[1] / 1e9;\n        var newSecs = clock.hrNow / 1000;\n        var difference = newSecs - oldSecs;\n        var secs = fixedFloor(difference);\n        var nanosecs = fixedModulo(difference * 1e9, 1e9);\n        return [secs, nanosecs];\n      }\n\n      return [fixedFloor(clock.hrNow / 1000), fixedModulo(clock.hrNow * 1e6, 1e9)];\n    };\n  }\n\n  return clock;\n}\n\nexports.createClock = createClock;\n\nexports.install = function install(target, now, toFake, loopLimit) {\n  var i, l;\n\n  if (target instanceof Date) {\n    toFake = now;\n    now = target.getTime();\n    target = null;\n  }\n\n  if (typeof target === \"number\") {\n    toFake = now;\n    now = target;\n    target = null;\n  }\n\n  if (!target) {\n    target = global;\n  }\n\n  var clock = createClock(now, loopLimit);\n\n  clock.uninstall = function () {\n    uninstall(clock, target);\n  };\n\n  clock.methods = toFake || [];\n\n  if (clock.methods.length === 0) {\n    clock.methods = keys(timers);\n  }\n\n  for (i = 0, l = clock.methods.length; i < l; i++) {\n    if (clock.methods[i] === \"hrtime\") {\n      if (target.process && typeof target.process.hrtime === \"function\") {\n        hijackMethod(target.process, clock.methods[i], clock);\n      }\n    } else {\n      hijackMethod(target, clock.methods[i], clock);\n    }\n  }\n\n  return clock;\n};","map":{"version":3,"sources":["/home/hoss/my App/my-app/node_modules/lolex/src/lolex-src.js"],"names":["userAgent","global","navigator","isRunningInIE","indexOf","setTimeout","clearTimeout","setInterval","clearInterval","Date","setImmediate","undefined","clearImmediate","NOOP","timeoutResult","addTimerReturnsObject","hrtimePresent","process","hrtime","NativeDate","uniqueTimerId","parseTime","str","strings","split","l","length","i","ms","parsed","test","Error","parseInt","Math","pow","fixedFloor","n","floor","ceil","fixedModulo","m","getEpoch","epoch","getTime","TypeError","inRange","from","to","timer","callAt","mirrorDateProperties","target","source","prop","hasOwnProperty","now","clock","toSource","toString","prototype","parse","UTC","toUTCString","createDate","ClockDate","year","month","date","hour","minute","second","arguments","addTimer","func","timers","id","createdAt","delay","duringTick","ref","unref","compareTimers","a","b","immediate","firstTimerInRange","isInRange","firstTimer","lastTimer","callTimer","exception","interval","apply","args","eval","e","timerType","clearTimer","timerId","ttype","uninstall","method","installedHrTime","methods","hadOwnProperty","ignore","hijackMethod","Object","call","keys","obj","ks","key","push","exports","createClock","loopLimit","hrNow","timeouts","timeout","Array","slice","tick","tickFrom","tickTo","previous","oldNow","firstException","updateHrTime","newNow","next","runAll","numTimers","runToLast","reset","setSystemTime","systemTime","difference","prev","isArray","oldSecs","newSecs","secs","nanosecs","install","toFake"],"mappings":"AAAA;;AAEA,IAAIA,SAAS,GAAGC,MAAM,CAACC,SAAP,IAAoBD,MAAM,CAACC,SAAP,CAAiBF,SAArD;AACA,IAAIG,aAAa,GAAGH,SAAS,IAAIA,SAAS,CAACI,OAAV,CAAkB,OAAlB,IAA6B,CAAC,CAA/D,C,CAEA;AACA;;AACA,IAAID,aAAJ,EAAmB;AACfF,EAAAA,MAAM,CAACI,UAAP,GAAoBJ,MAAM,CAACI,UAA3B;AACAJ,EAAAA,MAAM,CAACK,YAAP,GAAsBL,MAAM,CAACK,YAA7B;AACAL,EAAAA,MAAM,CAACM,WAAP,GAAqBN,MAAM,CAACM,WAA5B;AACAN,EAAAA,MAAM,CAACO,aAAP,GAAuBP,MAAM,CAACO,aAA9B;AACAP,EAAAA,MAAM,CAACQ,IAAP,GAAcR,MAAM,CAACQ,IAArB;AACH,C,CAED;AACA;;;AACA,IAAIR,MAAM,CAACS,YAAP,KAAwBC,SAA5B,EAAuC;AACnCV,EAAAA,MAAM,CAACS,YAAP,GAAsBT,MAAM,CAACS,YAA7B;AACAT,EAAAA,MAAM,CAACW,cAAP,GAAwBX,MAAM,CAACW,cAA/B;AACH,C,CAED;AACA;AACA;;;AAEA,IAAIC,IAAI,GAAG,YAAY;AAAE,SAAOF,SAAP;AAAmB,CAA5C;;AACA,IAAIG,aAAa,GAAGT,UAAU,CAACQ,IAAD,EAAO,CAAP,CAA9B;AACA,IAAIE,qBAAqB,GAAG,OAAOD,aAAP,KAAyB,QAArD;AACA,IAAIE,aAAa,GAAIf,MAAM,CAACgB,OAAP,IAAkB,OAAOhB,MAAM,CAACgB,OAAP,CAAeC,MAAtB,KAAiC,UAAxE;AACAZ,YAAY,CAACQ,aAAD,CAAZ;AAEA,IAAIK,UAAU,GAAGV,IAAjB;AACA,IAAIW,aAAa,GAAG,CAApB;AAEA;;;;;;AAKA,SAASC,SAAT,CAAmBC,GAAnB,EAAwB;AACpB,MAAI,CAACA,GAAL,EAAU;AACN,WAAO,CAAP;AACH;;AAED,MAAIC,OAAO,GAAGD,GAAG,CAACE,KAAJ,CAAU,GAAV,CAAd;AACA,MAAIC,CAAC,GAAGF,OAAO,CAACG,MAAhB;AACA,MAAIC,CAAC,GAAGF,CAAR;AACA,MAAIG,EAAE,GAAG,CAAT;AACA,MAAIC,MAAJ;;AAEA,MAAIJ,CAAC,GAAG,CAAJ,IAAS,CAAC,sBAAsBK,IAAtB,CAA2BR,GAA3B,CAAd,EAA+C;AAC3C,UAAM,IAAIS,KAAJ,CAAU,gFAAV,CAAN;AACH;;AAED,SAAOJ,CAAC,EAAR,EAAY;AACRE,IAAAA,MAAM,GAAGG,QAAQ,CAACT,OAAO,CAACI,CAAD,CAAR,EAAa,EAAb,CAAjB;;AAEA,QAAIE,MAAM,IAAI,EAAd,EAAkB;AACd,YAAM,IAAIE,KAAJ,CAAU,kBAAkBT,GAA5B,CAAN;AACH;;AAEDM,IAAAA,EAAE,IAAIC,MAAM,GAAGI,IAAI,CAACC,GAAL,CAAS,EAAT,EAAcT,CAAC,GAAGE,CAAJ,GAAQ,CAAtB,CAAf;AACH;;AAED,SAAOC,EAAE,GAAG,IAAZ;AACH;AAED;;;;;AAGA,SAASO,UAAT,CAAoBC,CAApB,EAAuB;AACnB,SAAQA,CAAC,IAAI,CAAL,GAASH,IAAI,CAACI,KAAL,CAAWD,CAAX,CAAT,GAAyBH,IAAI,CAACK,IAAL,CAAUF,CAAV,CAAjC;AACH;AAED;;;;;AAGA,SAASG,WAAT,CAAqBH,CAArB,EAAwBI,CAAxB,EAA2B;AACvB,SAAO,CAAEJ,CAAC,GAAGI,CAAL,GAAUA,CAAX,IAAgBA,CAAvB;AACH;AAED;;;;;AAGA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACrB,MAAI,CAACA,KAAL,EAAY;AAAE,WAAO,CAAP;AAAW;;AACzB,MAAI,OAAOA,KAAK,CAACC,OAAb,KAAyB,UAA7B,EAAyC;AAAE,WAAOD,KAAK,CAACC,OAAN,EAAP;AAAyB;;AACpE,MAAI,OAAOD,KAAP,KAAiB,QAArB,EAA+B;AAAE,WAAOA,KAAP;AAAe;;AAChD,QAAM,IAAIE,SAAJ,CAAc,6CAAd,CAAN;AACH;;AAED,SAASC,OAAT,CAAiBC,IAAjB,EAAuBC,EAAvB,EAA2BC,KAA3B,EAAkC;AAC9B,SAAOA,KAAK,IAAIA,KAAK,CAACC,MAAN,IAAgBH,IAAzB,IAAiCE,KAAK,CAACC,MAAN,IAAgBF,EAAxD;AACH;;AAED,SAASG,oBAAT,CAA8BC,MAA9B,EAAsCC,MAAtC,EAA8C;AAC1C,MAAIC,IAAJ;;AACA,OAAKA,IAAL,IAAaD,MAAb,EAAqB;AACjB,QAAIA,MAAM,CAACE,cAAP,CAAsBD,IAAtB,CAAJ,EAAiC;AAC7BF,MAAAA,MAAM,CAACE,IAAD,CAAN,GAAeD,MAAM,CAACC,IAAD,CAArB;AACH;AACJ,GANyC,CAQ1C;;;AACA,MAAID,MAAM,CAACG,GAAX,EAAgB;AACZJ,IAAAA,MAAM,CAACI,GAAP,GAAa,SAASA,GAAT,GAAe;AACxB,aAAOJ,MAAM,CAACK,KAAP,CAAaD,GAApB;AACH,KAFD;AAGH,GAJD,MAIO;AACH,WAAOJ,MAAM,CAACI,GAAd;AACH,GAfyC,CAiB1C;;;AACA,MAAIH,MAAM,CAACK,QAAX,EAAqB;AACjBN,IAAAA,MAAM,CAACM,QAAP,GAAkB,SAASA,QAAT,GAAoB;AAClC,aAAOL,MAAM,CAACK,QAAP,EAAP;AACH,KAFD;AAGH,GAJD,MAIO;AACH,WAAON,MAAM,CAACM,QAAd;AACH,GAxByC,CA0B1C;;;AACAN,EAAAA,MAAM,CAACO,QAAP,GAAkB,SAASA,QAAT,GAAoB;AAClC,WAAON,MAAM,CAACM,QAAP,EAAP;AACH,GAFD;;AAIAP,EAAAA,MAAM,CAACQ,SAAP,GAAmBP,MAAM,CAACO,SAA1B;AACAR,EAAAA,MAAM,CAACS,KAAP,GAAeR,MAAM,CAACQ,KAAtB;AACAT,EAAAA,MAAM,CAACU,GAAP,GAAaT,MAAM,CAACS,GAApB;AACAV,EAAAA,MAAM,CAACQ,SAAP,CAAiBG,WAAjB,GAA+BV,MAAM,CAACO,SAAP,CAAiBG,WAAhD;AAEA,SAAOX,MAAP;AACH;;AAED,SAASY,UAAT,GAAsB;AAClB,WAASC,SAAT,CAAmBC,IAAnB,EAAyBC,KAAzB,EAAgCC,IAAhC,EAAsCC,IAAtC,EAA4CC,MAA5C,EAAoDC,MAApD,EAA4D1C,EAA5D,EAAgE;AAC5D;AACA;AACA,YAAQ2C,SAAS,CAAC7C,MAAlB;AACI,WAAK,CAAL;AACI,eAAO,IAAIP,UAAJ,CAAe6C,SAAS,CAACR,KAAV,CAAgBD,GAA/B,CAAP;;AACJ,WAAK,CAAL;AACI,eAAO,IAAIpC,UAAJ,CAAe8C,IAAf,CAAP;;AACJ,WAAK,CAAL;AACI,eAAO,IAAI9C,UAAJ,CAAe8C,IAAf,EAAqBC,KAArB,CAAP;;AACJ,WAAK,CAAL;AACI,eAAO,IAAI/C,UAAJ,CAAe8C,IAAf,EAAqBC,KAArB,EAA4BC,IAA5B,CAAP;;AACJ,WAAK,CAAL;AACI,eAAO,IAAIhD,UAAJ,CAAe8C,IAAf,EAAqBC,KAArB,EAA4BC,IAA5B,EAAkCC,IAAlC,CAAP;;AACJ,WAAK,CAAL;AACI,eAAO,IAAIjD,UAAJ,CAAe8C,IAAf,EAAqBC,KAArB,EAA4BC,IAA5B,EAAkCC,IAAlC,EAAwCC,MAAxC,CAAP;;AACJ,WAAK,CAAL;AACI,eAAO,IAAIlD,UAAJ,CAAe8C,IAAf,EAAqBC,KAArB,EAA4BC,IAA5B,EAAkCC,IAAlC,EAAwCC,MAAxC,EAAgDC,MAAhD,CAAP;;AACJ;AACI,eAAO,IAAInD,UAAJ,CAAe8C,IAAf,EAAqBC,KAArB,EAA4BC,IAA5B,EAAkCC,IAAlC,EAAwCC,MAAxC,EAAgDC,MAAhD,EAAwD1C,EAAxD,CAAP;AAhBR;AAkBH;;AAED,SAAOsB,oBAAoB,CAACc,SAAD,EAAY7C,UAAZ,CAA3B;AACH;;AAED,SAASqD,QAAT,CAAkBhB,KAAlB,EAAyBR,KAAzB,EAAgC;AAC5B,MAAIA,KAAK,CAACyB,IAAN,KAAe9D,SAAnB,EAA8B;AAC1B,UAAM,IAAIoB,KAAJ,CAAU,0CAAV,CAAN;AACH;;AAED,MAAI,CAACyB,KAAK,CAACkB,MAAX,EAAmB;AACflB,IAAAA,KAAK,CAACkB,MAAN,GAAe,EAAf;AACH;;AAED1B,EAAAA,KAAK,CAAC2B,EAAN,GAAWvD,aAAa,EAAxB;AACA4B,EAAAA,KAAK,CAAC4B,SAAN,GAAkBpB,KAAK,CAACD,GAAxB;AACAP,EAAAA,KAAK,CAACC,MAAN,GAAeO,KAAK,CAACD,GAAN,IAAavB,QAAQ,CAACgB,KAAK,CAAC6B,KAAP,CAAR,KAA0BrB,KAAK,CAACsB,UAAN,GAAmB,CAAnB,GAAuB,CAAjD,CAAb,CAAf;AAEAtB,EAAAA,KAAK,CAACkB,MAAN,CAAa1B,KAAK,CAAC2B,EAAnB,IAAyB3B,KAAzB;;AAEA,MAAIjC,qBAAJ,EAA2B;AACvB,WAAO;AACH4D,MAAAA,EAAE,EAAE3B,KAAK,CAAC2B,EADP;AAEHI,MAAAA,GAAG,EAAElE,IAFF;AAGHmE,MAAAA,KAAK,EAAEnE;AAHJ,KAAP;AAKH;;AAED,SAAOmC,KAAK,CAAC2B,EAAb;AACH;AAGD;;;AACA,SAASM,aAAT,CAAuBC,CAAvB,EAA0BC,CAA1B,EAA6B;AACzB;AACA,MAAID,CAAC,CAACjC,MAAF,GAAWkC,CAAC,CAAClC,MAAjB,EAAyB;AACrB,WAAO,CAAC,CAAR;AACH;;AACD,MAAIiC,CAAC,CAACjC,MAAF,GAAWkC,CAAC,CAAClC,MAAjB,EAAyB;AACrB,WAAO,CAAP;AACH,GAPwB,CASzB;;;AACA,MAAIiC,CAAC,CAACE,SAAF,IAAe,CAACD,CAAC,CAACC,SAAtB,EAAiC;AAC7B,WAAO,CAAC,CAAR;AACH;;AACD,MAAI,CAACF,CAAC,CAACE,SAAH,IAAgBD,CAAC,CAACC,SAAtB,EAAiC;AAC7B,WAAO,CAAP;AACH,GAfwB,CAiBzB;;;AACA,MAAIF,CAAC,CAACN,SAAF,GAAcO,CAAC,CAACP,SAApB,EAA+B;AAC3B,WAAO,CAAC,CAAR;AACH;;AACD,MAAIM,CAAC,CAACN,SAAF,GAAcO,CAAC,CAACP,SAApB,EAA+B;AAC3B,WAAO,CAAP;AACH,GAvBwB,CAyBzB;;;AACA,MAAIM,CAAC,CAACP,EAAF,GAAOQ,CAAC,CAACR,EAAb,EAAiB;AACb,WAAO,CAAC,CAAR;AACH;;AACD,MAAIO,CAAC,CAACP,EAAF,GAAOQ,CAAC,CAACR,EAAb,EAAiB;AACb,WAAO,CAAP;AACH,GA/BwB,CAiCzB;;AACH;;AAED,SAASU,iBAAT,CAA2B7B,KAA3B,EAAkCV,IAAlC,EAAwCC,EAAxC,EAA4C;AACxC,MAAI2B,MAAM,GAAGlB,KAAK,CAACkB,MAAnB;AACA,MAAI1B,KAAK,GAAG,IAAZ;AACA,MAAI2B,EAAJ,EAAQW,SAAR;;AAEA,OAAKX,EAAL,IAAWD,MAAX,EAAmB;AACf,QAAIA,MAAM,CAACpB,cAAP,CAAsBqB,EAAtB,CAAJ,EAA+B;AAC3BW,MAAAA,SAAS,GAAGzC,OAAO,CAACC,IAAD,EAAOC,EAAP,EAAW2B,MAAM,CAACC,EAAD,CAAjB,CAAnB;;AAEA,UAAIW,SAAS,KAAK,CAACtC,KAAD,IAAUiC,aAAa,CAACjC,KAAD,EAAQ0B,MAAM,CAACC,EAAD,CAAd,CAAb,KAAqC,CAApD,CAAb,EAAqE;AACjE3B,QAAAA,KAAK,GAAG0B,MAAM,CAACC,EAAD,CAAd;AACH;AACJ;AACJ;;AAED,SAAO3B,KAAP;AACH;;AAED,SAASuC,UAAT,CAAoB/B,KAApB,EAA2B;AACvB,MAAIkB,MAAM,GAAGlB,KAAK,CAACkB,MAAnB;AACA,MAAI1B,KAAK,GAAG,IAAZ;AACA,MAAI2B,EAAJ;;AAEA,OAAKA,EAAL,IAAWD,MAAX,EAAmB;AACf,QAAIA,MAAM,CAACpB,cAAP,CAAsBqB,EAAtB,CAAJ,EAA+B;AAC3B,UAAI,CAAC3B,KAAD,IAAUiC,aAAa,CAACjC,KAAD,EAAQ0B,MAAM,CAACC,EAAD,CAAd,CAAb,KAAqC,CAAnD,EAAsD;AAClD3B,QAAAA,KAAK,GAAG0B,MAAM,CAACC,EAAD,CAAd;AACH;AACJ;AACJ;;AAED,SAAO3B,KAAP;AACH;;AAED,SAASwC,SAAT,CAAmBhC,KAAnB,EAA0B;AACtB,MAAIkB,MAAM,GAAGlB,KAAK,CAACkB,MAAnB;AACA,MAAI1B,KAAK,GAAG,IAAZ;AACA,MAAI2B,EAAJ;;AAEA,OAAKA,EAAL,IAAWD,MAAX,EAAmB;AACf,QAAIA,MAAM,CAACpB,cAAP,CAAsBqB,EAAtB,CAAJ,EAA+B;AAC3B,UAAI,CAAC3B,KAAD,IAAUiC,aAAa,CAACjC,KAAD,EAAQ0B,MAAM,CAACC,EAAD,CAAd,CAAb,KAAqC,CAAC,CAApD,EAAuD;AACnD3B,QAAAA,KAAK,GAAG0B,MAAM,CAACC,EAAD,CAAd;AACH;AACJ;AACJ;;AAED,SAAO3B,KAAP;AACH;;AAED,SAASyC,SAAT,CAAmBjC,KAAnB,EAA0BR,KAA1B,EAAiC;AAC7B,MAAI0C,SAAJ;;AAEA,MAAI,OAAO1C,KAAK,CAAC2C,QAAb,KAA0B,QAA9B,EAAwC;AACpCnC,IAAAA,KAAK,CAACkB,MAAN,CAAa1B,KAAK,CAAC2B,EAAnB,EAAuB1B,MAAvB,IAAiCD,KAAK,CAAC2C,QAAvC;AACH,GAFD,MAEO;AACH,WAAOnC,KAAK,CAACkB,MAAN,CAAa1B,KAAK,CAAC2B,EAAnB,CAAP;AACH;;AAED,MAAI;AACA,QAAI,OAAO3B,KAAK,CAACyB,IAAb,KAAsB,UAA1B,EAAsC;AAClCzB,MAAAA,KAAK,CAACyB,IAAN,CAAWmB,KAAX,CAAiB,IAAjB,EAAuB5C,KAAK,CAAC6C,IAA7B;AACH,KAFD,MAEO;AACH;AACAC,MAAAA,IAAI,CAAC9C,KAAK,CAACyB,IAAP,CAAJ;AACH;AACJ,GAPD,CAOE,OAAOsB,CAAP,EAAU;AACRL,IAAAA,SAAS,GAAGK,CAAZ;AACH;;AAED,MAAI,CAACvC,KAAK,CAACkB,MAAN,CAAa1B,KAAK,CAAC2B,EAAnB,CAAL,EAA6B;AACzB,QAAIe,SAAJ,EAAe;AACX,YAAMA,SAAN;AACH;;AACD;AACH;;AAED,MAAIA,SAAJ,EAAe;AACX,UAAMA,SAAN;AACH;AACJ;;AAED,SAASM,SAAT,CAAmBhD,KAAnB,EAA0B;AACtB,MAAIA,KAAK,CAACoC,SAAV,EAAqB;AACjB,WAAO,WAAP;AACH;;AACD,MAAIpC,KAAK,CAAC2C,QAAN,KAAmBhF,SAAvB,EAAkC;AAC9B,WAAO,UAAP;AACH;;AACD,SAAO,SAAP;AACH;;AAED,SAASsF,UAAT,CAAoBzC,KAApB,EAA2B0C,OAA3B,EAAoCC,KAApC,EAA2C;AACvC,MAAI,CAACD,OAAL,EAAc;AACV;AACA;AACA;AACH;;AAED,MAAI,CAAC1C,KAAK,CAACkB,MAAX,EAAmB;AACflB,IAAAA,KAAK,CAACkB,MAAN,GAAe,EAAf;AACH,GATsC,CAWvC;AACA;;;AACA,MAAI,OAAOwB,OAAP,KAAmB,QAAvB,EAAiC;AAC7BA,IAAAA,OAAO,GAAGA,OAAO,CAACvB,EAAlB;AACH;;AAED,MAAInB,KAAK,CAACkB,MAAN,CAAapB,cAAb,CAA4B4C,OAA5B,CAAJ,EAA0C;AACtC;AACA,QAAIlD,KAAK,GAAGQ,KAAK,CAACkB,MAAN,CAAawB,OAAb,CAAZ;;AACA,QAAIF,SAAS,CAAChD,KAAD,CAAT,KAAqBmD,KAAzB,EAAgC;AAC5B,aAAO3C,KAAK,CAACkB,MAAN,CAAawB,OAAb,CAAP;AACH,KAFD,MAEO;AACH,YAAM,IAAInE,KAAJ,CAAU,+CAA+CiE,SAAS,CAAChD,KAAD,CAAxD,GACE,2BADF,GACgCmD,KADhC,GACwC,IADlD,CAAN;AAEH;AACJ;AACJ;;AAED,SAASC,SAAT,CAAmB5C,KAAnB,EAA0BL,MAA1B,EAAkC;AAC9B,MAAIkD,MAAJ,EACI1E,CADJ,EAEIF,CAFJ;AAGA,MAAI6E,eAAe,GAAG,SAAtB;;AAEA,OAAK3E,CAAC,GAAG,CAAJ,EAAOF,CAAC,GAAG+B,KAAK,CAAC+C,OAAN,CAAc7E,MAA9B,EAAsCC,CAAC,GAAGF,CAA1C,EAA6CE,CAAC,EAA9C,EAAkD;AAC9C0E,IAAAA,MAAM,GAAG7C,KAAK,CAAC+C,OAAN,CAAc5E,CAAd,CAAT;;AACA,QAAI0E,MAAM,KAAK,QAAX,IAAuBlD,MAAM,CAAClC,OAAlC,EAA2C;AACvCkC,MAAAA,MAAM,CAAClC,OAAP,CAAeC,MAAf,GAAwBsC,KAAK,CAAC8C,eAAD,CAA7B;AACH,KAFD,MAEO;AACH,UAAInD,MAAM,CAACkD,MAAD,CAAN,IAAkBlD,MAAM,CAACkD,MAAD,CAAN,CAAeG,cAArC,EAAqD;AACjDrD,QAAAA,MAAM,CAACkD,MAAD,CAAN,GAAiB7C,KAAK,CAAC,MAAM6C,MAAP,CAAtB;AACH,OAFD,MAEO;AACH,YAAI;AACA,iBAAOlD,MAAM,CAACkD,MAAD,CAAb;AACH,SAFD,CAEE,OAAOI,MAAP,EAAe;AAAE;AAAiC;AACvD;AACJ;AACJ,GAnB6B,CAqB9B;;;AACAjD,EAAAA,KAAK,CAAC+C,OAAN,GAAgB,EAAhB;AACH;;AAED,SAASG,YAAT,CAAsBvD,MAAtB,EAA8BkD,MAA9B,EAAsC7C,KAAtC,EAA6C;AACzC,MAAIH,IAAJ;AAEAG,EAAAA,KAAK,CAAC6C,MAAD,CAAL,CAAcG,cAAd,GAA+BG,MAAM,CAAChD,SAAP,CAAiBL,cAAjB,CAAgCsD,IAAhC,CAAqCzD,MAArC,EAA6CkD,MAA7C,CAA/B;AACA7C,EAAAA,KAAK,CAAC,MAAM6C,MAAP,CAAL,GAAsBlD,MAAM,CAACkD,MAAD,CAA5B;;AAEA,MAAIA,MAAM,KAAK,MAAf,EAAuB;AACnB,QAAIlC,IAAI,GAAGjB,oBAAoB,CAACM,KAAK,CAAC6C,MAAD,CAAN,EAAgBlD,MAAM,CAACkD,MAAD,CAAtB,CAA/B;AACAlD,IAAAA,MAAM,CAACkD,MAAD,CAAN,GAAiBlC,IAAjB;AACH,GAHD,MAGO;AACHhB,IAAAA,MAAM,CAACkD,MAAD,CAAN,GAAiB,YAAY;AACzB,aAAO7C,KAAK,CAAC6C,MAAD,CAAL,CAAcT,KAAd,CAAoBpC,KAApB,EAA2Be,SAA3B,CAAP;AACH,KAFD;;AAIA,SAAKlB,IAAL,IAAaG,KAAK,CAAC6C,MAAD,CAAlB,EAA4B;AACxB,UAAI7C,KAAK,CAAC6C,MAAD,CAAL,CAAc/C,cAAd,CAA6BD,IAA7B,CAAJ,EAAwC;AACpCF,QAAAA,MAAM,CAACkD,MAAD,CAAN,CAAehD,IAAf,IAAuBG,KAAK,CAAC6C,MAAD,CAAL,CAAchD,IAAd,CAAvB;AACH;AACJ;AACJ;;AAEDF,EAAAA,MAAM,CAACkD,MAAD,CAAN,CAAe7C,KAAf,GAAuBA,KAAvB;AACH;;AAED,IAAIkB,MAAM,GAAG;AACTrE,EAAAA,UAAU,EAAEA,UADH;AAETC,EAAAA,YAAY,EAAEA,YAFL;AAGTI,EAAAA,YAAY,EAAET,MAAM,CAACS,YAHZ;AAITE,EAAAA,cAAc,EAAEX,MAAM,CAACW,cAJd;AAKTL,EAAAA,WAAW,EAAEA,WALJ;AAMTC,EAAAA,aAAa,EAAEA,aANN;AAOTC,EAAAA,IAAI,EAAEA;AAPG,CAAb;;AAUA,IAAIO,aAAJ,EAAmB;AACf0D,EAAAA,MAAM,CAACxD,MAAP,GAAgBjB,MAAM,CAACgB,OAAP,CAAeC,MAA/B;AACH;;AAED,IAAI2F,IAAI,GAAGF,MAAM,CAACE,IAAP,IAAe,UAAUC,GAAV,EAAe;AACrC,MAAIC,EAAE,GAAG,EAAT;AACA,MAAIC,GAAJ;;AAEA,OAAKA,GAAL,IAAYF,GAAZ,EAAiB;AACb,QAAIA,GAAG,CAACxD,cAAJ,CAAmB0D,GAAnB,CAAJ,EAA6B;AACzBD,MAAAA,EAAE,CAACE,IAAH,CAAQD,GAAR;AACH;AACJ;;AAED,SAAOD,EAAP;AACH,CAXD;;AAaAG,OAAO,CAACxC,MAAR,GAAiBA,MAAjB;;AAEA,SAASyC,WAAT,CAAqB5D,GAArB,EAA0B6D,SAA1B,EAAqC;AACjCA,EAAAA,SAAS,GAAGA,SAAS,IAAI,IAAzB;AAEA,MAAI5D,KAAK,GAAG;AACRD,IAAAA,GAAG,EAAEd,QAAQ,CAACc,GAAD,CADL;AAER8D,IAAAA,KAAK,EAAE,CAFC;AAGRC,IAAAA,QAAQ,EAAE,EAHF;AAIR7G,IAAAA,IAAI,EAAEsD,UAAU,EAJR;AAKRqD,IAAAA,SAAS,EAAEA;AALH,GAAZ;AAQA5D,EAAAA,KAAK,CAAC/C,IAAN,CAAW+C,KAAX,GAAmBA,KAAnB;;AAEAA,EAAAA,KAAK,CAACnD,UAAN,GAAmB,SAASA,UAAT,CAAoBoE,IAApB,EAA0B8C,OAA1B,EAAmC;AAClD,WAAO/C,QAAQ,CAAChB,KAAD,EAAQ;AACnBiB,MAAAA,IAAI,EAAEA,IADa;AAEnBoB,MAAAA,IAAI,EAAE2B,KAAK,CAAC7D,SAAN,CAAgB8D,KAAhB,CAAsBb,IAAtB,CAA2BrC,SAA3B,EAAsC,CAAtC,CAFa;AAGnBM,MAAAA,KAAK,EAAE0C;AAHY,KAAR,CAAf;AAKH,GAND;;AAQA/D,EAAAA,KAAK,CAAClD,YAAN,GAAqB,SAASA,YAAT,CAAsB4F,OAAtB,EAA+B;AAChD,WAAOD,UAAU,CAACzC,KAAD,EAAQ0C,OAAR,EAAiB,SAAjB,CAAjB;AACH,GAFD;;AAIA1C,EAAAA,KAAK,CAACjD,WAAN,GAAoB,SAASA,WAAT,CAAqBkE,IAArB,EAA2B8C,OAA3B,EAAoC;AACpD,WAAO/C,QAAQ,CAAChB,KAAD,EAAQ;AACnBiB,MAAAA,IAAI,EAAEA,IADa;AAEnBoB,MAAAA,IAAI,EAAE2B,KAAK,CAAC7D,SAAN,CAAgB8D,KAAhB,CAAsBb,IAAtB,CAA2BrC,SAA3B,EAAsC,CAAtC,CAFa;AAGnBM,MAAAA,KAAK,EAAE0C,OAHY;AAInB5B,MAAAA,QAAQ,EAAE4B;AAJS,KAAR,CAAf;AAMH,GAPD;;AASA/D,EAAAA,KAAK,CAAChD,aAAN,GAAsB,SAASA,aAAT,CAAuB0F,OAAvB,EAAgC;AAClD,WAAOD,UAAU,CAACzC,KAAD,EAAQ0C,OAAR,EAAiB,UAAjB,CAAjB;AACH,GAFD;;AAIA1C,EAAAA,KAAK,CAAC9C,YAAN,GAAqB,SAASA,YAAT,CAAsB+D,IAAtB,EAA4B;AAC7C,WAAOD,QAAQ,CAAChB,KAAD,EAAQ;AACnBiB,MAAAA,IAAI,EAAEA,IADa;AAEnBoB,MAAAA,IAAI,EAAE2B,KAAK,CAAC7D,SAAN,CAAgB8D,KAAhB,CAAsBb,IAAtB,CAA2BrC,SAA3B,EAAsC,CAAtC,CAFa;AAGnBa,MAAAA,SAAS,EAAE;AAHQ,KAAR,CAAf;AAKH,GAND;;AAQA5B,EAAAA,KAAK,CAAC5C,cAAN,GAAuB,SAASA,cAAT,CAAwBsF,OAAxB,EAAiC;AACpD,WAAOD,UAAU,CAACzC,KAAD,EAAQ0C,OAAR,EAAiB,WAAjB,CAAjB;AACH,GAFD;;AAIA1C,EAAAA,KAAK,CAACkE,IAAN,GAAa,SAASA,IAAT,CAAc9F,EAAd,EAAkB;AAC3BA,IAAAA,EAAE,GAAG,OAAOA,EAAP,KAAc,QAAd,GAAyBA,EAAzB,GAA8BP,SAAS,CAACO,EAAD,CAA5C;AACA,QAAI+F,QAAQ,GAAGnE,KAAK,CAACD,GAArB;AACA,QAAIqE,MAAM,GAAGpE,KAAK,CAACD,GAAN,GAAY3B,EAAzB;AACA,QAAIiG,QAAQ,GAAGrE,KAAK,CAACD,GAArB;AACA,QAAIP,KAAK,GAAGqC,iBAAiB,CAAC7B,KAAD,EAAQmE,QAAR,EAAkBC,MAAlB,CAA7B;AACA,QAAIE,MAAJ,EAAYC,cAAZ;AAEAvE,IAAAA,KAAK,CAACsB,UAAN,GAAmB,IAAnB;;AAEA,aAASkD,YAAT,CAAsBC,MAAtB,EAA8B;AAC1BzE,MAAAA,KAAK,CAAC6D,KAAN,IAAgBY,MAAM,GAAGzE,KAAK,CAACD,GAA/B;AACH;;AAED,WAAOP,KAAK,IAAI2E,QAAQ,IAAIC,MAA5B,EAAoC;AAChC,UAAIpE,KAAK,CAACkB,MAAN,CAAa1B,KAAK,CAAC2B,EAAnB,CAAJ,EAA4B;AACxBqD,QAAAA,YAAY,CAAChF,KAAK,CAACC,MAAP,CAAZ;AACA0E,QAAAA,QAAQ,GAAG3E,KAAK,CAACC,MAAjB;AACAO,QAAAA,KAAK,CAACD,GAAN,GAAYP,KAAK,CAACC,MAAlB;;AACA,YAAI;AACA6E,UAAAA,MAAM,GAAGtE,KAAK,CAACD,GAAf;AACAkC,UAAAA,SAAS,CAACjC,KAAD,EAAQR,KAAR,CAAT,CAFA,CAGA;;AACA,cAAI8E,MAAM,KAAKtE,KAAK,CAACD,GAArB,EAA0B;AACtBoE,YAAAA,QAAQ,IAAInE,KAAK,CAACD,GAAN,GAAYuE,MAAxB;AACAF,YAAAA,MAAM,IAAIpE,KAAK,CAACD,GAAN,GAAYuE,MAAtB;AACAD,YAAAA,QAAQ,IAAIrE,KAAK,CAACD,GAAN,GAAYuE,MAAxB;AACH;AACJ,SATD,CASE,OAAO/B,CAAP,EAAU;AACRgC,UAAAA,cAAc,GAAGA,cAAc,IAAIhC,CAAnC;AACH;AACJ;;AAED/C,MAAAA,KAAK,GAAGqC,iBAAiB,CAAC7B,KAAD,EAAQqE,QAAR,EAAkBD,MAAlB,CAAzB;AACAC,MAAAA,QAAQ,GAAGF,QAAX;AACH;;AAEDnE,IAAAA,KAAK,CAACsB,UAAN,GAAmB,KAAnB;AACAkD,IAAAA,YAAY,CAACJ,MAAD,CAAZ;AACApE,IAAAA,KAAK,CAACD,GAAN,GAAYqE,MAAZ;;AAEA,QAAIG,cAAJ,EAAoB;AAChB,YAAMA,cAAN;AACH;;AAED,WAAOvE,KAAK,CAACD,GAAb;AACH,GA9CD;;AAgDAC,EAAAA,KAAK,CAAC0E,IAAN,GAAa,SAASA,IAAT,GAAgB;AACzB,QAAIlF,KAAK,GAAGuC,UAAU,CAAC/B,KAAD,CAAtB;;AACA,QAAI,CAACR,KAAL,EAAY;AACR,aAAOQ,KAAK,CAACD,GAAb;AACH;;AAEDC,IAAAA,KAAK,CAACsB,UAAN,GAAmB,IAAnB;;AACA,QAAI;AACAtB,MAAAA,KAAK,CAACD,GAAN,GAAYP,KAAK,CAACC,MAAlB;AACAwC,MAAAA,SAAS,CAACjC,KAAD,EAAQR,KAAR,CAAT;AACA,aAAOQ,KAAK,CAACD,GAAb;AACH,KAJD,SAIU;AACNC,MAAAA,KAAK,CAACsB,UAAN,GAAmB,KAAnB;AACH;AACJ,GAdD;;AAgBAtB,EAAAA,KAAK,CAAC2E,MAAN,GAAe,SAASA,MAAT,GAAkB;AAC7B,QAAIC,SAAJ,EAAezG,CAAf;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6B,KAAK,CAAC4D,SAAtB,EAAiCzF,CAAC,EAAlC,EAAsC;AAClC,UAAI,CAAC6B,KAAK,CAACkB,MAAX,EAAmB;AACf,eAAOlB,KAAK,CAACD,GAAb;AACH;;AAED6E,MAAAA,SAAS,GAAGzB,MAAM,CAACE,IAAP,CAAYrD,KAAK,CAACkB,MAAlB,EAA0BhD,MAAtC;;AACA,UAAI0G,SAAS,KAAK,CAAlB,EAAqB;AACjB,eAAO5E,KAAK,CAACD,GAAb;AACH;;AAEDC,MAAAA,KAAK,CAAC0E,IAAN;AACH;;AAED,UAAM,IAAInG,KAAJ,CAAU,4BAA4ByB,KAAK,CAAC4D,SAAlC,GAA8C,qCAAxD,CAAN;AACH,GAhBD;;AAkBA5D,EAAAA,KAAK,CAAC6E,SAAN,GAAkB,SAASA,SAAT,GAAqB;AACnC,QAAIrF,KAAK,GAAGwC,SAAS,CAAChC,KAAD,CAArB;;AACA,QAAI,CAACR,KAAL,EAAY;AACR,aAAOQ,KAAK,CAACD,GAAb;AACH;;AAED,WAAOC,KAAK,CAACkE,IAAN,CAAW1E,KAAK,CAACC,MAAjB,CAAP;AACH,GAPD;;AASAO,EAAAA,KAAK,CAAC8E,KAAN,GAAc,SAASA,KAAT,GAAiB;AAC3B9E,IAAAA,KAAK,CAACkB,MAAN,GAAe,EAAf;AACH,GAFD;;AAIAlB,EAAAA,KAAK,CAAC+E,aAAN,GAAsB,SAASA,aAAT,CAAuBC,UAAvB,EAAmC;AACrD;AACA,QAAIP,MAAM,GAAGxF,QAAQ,CAAC+F,UAAD,CAArB;AACA,QAAIC,UAAU,GAAGR,MAAM,GAAGzE,KAAK,CAACD,GAAhC;AACA,QAAIoB,EAAJ,EAAQ3B,KAAR,CAJqD,CAMrD;;AACAQ,IAAAA,KAAK,CAACD,GAAN,GAAY0E,MAAZ,CAPqD,CASrD;;AACA,SAAKtD,EAAL,IAAWnB,KAAK,CAACkB,MAAjB,EAAyB;AACrB,UAAIlB,KAAK,CAACkB,MAAN,CAAapB,cAAb,CAA4BqB,EAA5B,CAAJ,EAAqC;AACjC3B,QAAAA,KAAK,GAAGQ,KAAK,CAACkB,MAAN,CAAaC,EAAb,CAAR;AACA3B,QAAAA,KAAK,CAAC4B,SAAN,IAAmB6D,UAAnB;AACAzF,QAAAA,KAAK,CAACC,MAAN,IAAgBwF,UAAhB;AACH;AACJ;AACJ,GAjBD;;AAmBA,MAAIzH,aAAJ,EAAmB;AACfwC,IAAAA,KAAK,CAACtC,MAAN,GAAe,UAAUwH,IAAV,EAAgB;AAC3B,UAAIlB,KAAK,CAACmB,OAAN,CAAcD,IAAd,CAAJ,EAAyB;AACrB,YAAIE,OAAO,GAAIF,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAnC;AACA,YAAIG,OAAO,GAAIrF,KAAK,CAAC6D,KAAN,GAAc,IAA7B;AACA,YAAIoB,UAAU,GAAII,OAAO,GAAGD,OAA5B;AACA,YAAIE,IAAI,GAAG3G,UAAU,CAACsG,UAAD,CAArB;AACA,YAAIM,QAAQ,GAAGxG,WAAW,CAACkG,UAAU,GAAG,GAAd,EAAmB,GAAnB,CAA1B;AACA,eAAO,CACHK,IADG,EAEHC,QAFG,CAAP;AAIH;;AACD,aAAO,CACH5G,UAAU,CAACqB,KAAK,CAAC6D,KAAN,GAAc,IAAf,CADP,EAEH9E,WAAW,CAACiB,KAAK,CAAC6D,KAAN,GAAc,GAAf,EAAoB,GAApB,CAFR,CAAP;AAIH,KAhBD;AAiBH;;AAED,SAAO7D,KAAP;AACH;;AACD0D,OAAO,CAACC,WAAR,GAAsBA,WAAtB;;AAEAD,OAAO,CAAC8B,OAAR,GAAkB,SAASA,OAAT,CAAiB7F,MAAjB,EAAyBI,GAAzB,EAA8B0F,MAA9B,EAAsC7B,SAAtC,EAAiD;AAC/D,MAAIzF,CAAJ,EAAOF,CAAP;;AAEA,MAAI0B,MAAM,YAAY1C,IAAtB,EAA4B;AACxBwI,IAAAA,MAAM,GAAG1F,GAAT;AACAA,IAAAA,GAAG,GAAGJ,MAAM,CAACR,OAAP,EAAN;AACAQ,IAAAA,MAAM,GAAG,IAAT;AACH;;AAED,MAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC5B8F,IAAAA,MAAM,GAAG1F,GAAT;AACAA,IAAAA,GAAG,GAAGJ,MAAN;AACAA,IAAAA,MAAM,GAAG,IAAT;AACH;;AAED,MAAI,CAACA,MAAL,EAAa;AACTA,IAAAA,MAAM,GAAGlD,MAAT;AACH;;AAED,MAAIuD,KAAK,GAAG2D,WAAW,CAAC5D,GAAD,EAAM6D,SAAN,CAAvB;;AAEA5D,EAAAA,KAAK,CAAC4C,SAAN,GAAkB,YAAY;AAC1BA,IAAAA,SAAS,CAAC5C,KAAD,EAAQL,MAAR,CAAT;AACH,GAFD;;AAIAK,EAAAA,KAAK,CAAC+C,OAAN,GAAgB0C,MAAM,IAAI,EAA1B;;AAEA,MAAIzF,KAAK,CAAC+C,OAAN,CAAc7E,MAAd,KAAyB,CAA7B,EAAgC;AAC5B8B,IAAAA,KAAK,CAAC+C,OAAN,GAAgBM,IAAI,CAACnC,MAAD,CAApB;AACH;;AAED,OAAK/C,CAAC,GAAG,CAAJ,EAAOF,CAAC,GAAG+B,KAAK,CAAC+C,OAAN,CAAc7E,MAA9B,EAAsCC,CAAC,GAAGF,CAA1C,EAA6CE,CAAC,EAA9C,EAAkD;AAC9C,QAAI6B,KAAK,CAAC+C,OAAN,CAAc5E,CAAd,MAAqB,QAAzB,EAAmC;AAC/B,UAAIwB,MAAM,CAAClC,OAAP,IAAkB,OAAOkC,MAAM,CAAClC,OAAP,CAAeC,MAAtB,KAAiC,UAAvD,EAAmE;AAC/DwF,QAAAA,YAAY,CAACvD,MAAM,CAAClC,OAAR,EAAiBuC,KAAK,CAAC+C,OAAN,CAAc5E,CAAd,CAAjB,EAAmC6B,KAAnC,CAAZ;AACH;AACJ,KAJD,MAIO;AACHkD,MAAAA,YAAY,CAACvD,MAAD,EAASK,KAAK,CAAC+C,OAAN,CAAc5E,CAAd,CAAT,EAA2B6B,KAA3B,CAAZ;AACH;AACJ;;AAED,SAAOA,KAAP;AACH,CA1CD","sourcesContent":["\"use strict\";\n\nvar userAgent = global.navigator && global.navigator.userAgent;\nvar isRunningInIE = userAgent && userAgent.indexOf(\"MSIE \") > -1;\n\n// Make properties writable in IE, as per\n// http://www.adequatelygood.com/Replacing-setTimeout-Globally.html\nif (isRunningInIE) {\n    global.setTimeout = global.setTimeout;\n    global.clearTimeout = global.clearTimeout;\n    global.setInterval = global.setInterval;\n    global.clearInterval = global.clearInterval;\n    global.Date = global.Date;\n}\n\n// setImmediate is not a standard function\n// avoid adding the prop to the window object if not present\nif (global.setImmediate !== undefined) {\n    global.setImmediate = global.setImmediate;\n    global.clearImmediate = global.clearImmediate;\n}\n\n// node expects setTimeout/setInterval to return a fn object w/ .ref()/.unref()\n// browsers, a number.\n// see https://github.com/cjohansen/Sinon.JS/pull/436\n\nvar NOOP = function () { return undefined; };\nvar timeoutResult = setTimeout(NOOP, 0);\nvar addTimerReturnsObject = typeof timeoutResult === \"object\";\nvar hrtimePresent = (global.process && typeof global.process.hrtime === \"function\");\nclearTimeout(timeoutResult);\n\nvar NativeDate = Date;\nvar uniqueTimerId = 1;\n\n/**\n * Parse strings like \"01:10:00\" (meaning 1 hour, 10 minutes, 0 seconds) into\n * number of milliseconds. This is used to support human-readable strings passed\n * to clock.tick()\n */\nfunction parseTime(str) {\n    if (!str) {\n        return 0;\n    }\n\n    var strings = str.split(\":\");\n    var l = strings.length;\n    var i = l;\n    var ms = 0;\n    var parsed;\n\n    if (l > 3 || !/^(\\d\\d:){0,2}\\d\\d?$/.test(str)) {\n        throw new Error(\"tick only understands numbers, 'm:s' and 'h:m:s'. Each part must be two digits\");\n    }\n\n    while (i--) {\n        parsed = parseInt(strings[i], 10);\n\n        if (parsed >= 60) {\n            throw new Error(\"Invalid time \" + str);\n        }\n\n        ms += parsed * Math.pow(60, (l - i - 1));\n    }\n\n    return ms * 1000;\n}\n\n/**\n * Floor function that also works for negative numbers\n */\nfunction fixedFloor(n) {\n    return (n >= 0 ? Math.floor(n) : Math.ceil(n));\n}\n\n/**\n * % operator that also works for negative numbers\n */\nfunction fixedModulo(n, m) {\n    return ((n % m) + m) % m;\n}\n\n/**\n * Used to grok the `now` parameter to createClock.\n */\nfunction getEpoch(epoch) {\n    if (!epoch) { return 0; }\n    if (typeof epoch.getTime === \"function\") { return epoch.getTime(); }\n    if (typeof epoch === \"number\") { return epoch; }\n    throw new TypeError(\"now should be milliseconds since UNIX epoch\");\n}\n\nfunction inRange(from, to, timer) {\n    return timer && timer.callAt >= from && timer.callAt <= to;\n}\n\nfunction mirrorDateProperties(target, source) {\n    var prop;\n    for (prop in source) {\n        if (source.hasOwnProperty(prop)) {\n            target[prop] = source[prop];\n        }\n    }\n\n    // set special now implementation\n    if (source.now) {\n        target.now = function now() {\n            return target.clock.now;\n        };\n    } else {\n        delete target.now;\n    }\n\n    // set special toSource implementation\n    if (source.toSource) {\n        target.toSource = function toSource() {\n            return source.toSource();\n        };\n    } else {\n        delete target.toSource;\n    }\n\n    // set special toString implementation\n    target.toString = function toString() {\n        return source.toString();\n    };\n\n    target.prototype = source.prototype;\n    target.parse = source.parse;\n    target.UTC = source.UTC;\n    target.prototype.toUTCString = source.prototype.toUTCString;\n\n    return target;\n}\n\nfunction createDate() {\n    function ClockDate(year, month, date, hour, minute, second, ms) {\n        // Defensive and verbose to avoid potential harm in passing\n        // explicit undefined when user does not pass argument\n        switch (arguments.length) {\n            case 0:\n                return new NativeDate(ClockDate.clock.now);\n            case 1:\n                return new NativeDate(year);\n            case 2:\n                return new NativeDate(year, month);\n            case 3:\n                return new NativeDate(year, month, date);\n            case 4:\n                return new NativeDate(year, month, date, hour);\n            case 5:\n                return new NativeDate(year, month, date, hour, minute);\n            case 6:\n                return new NativeDate(year, month, date, hour, minute, second);\n            default:\n                return new NativeDate(year, month, date, hour, minute, second, ms);\n        }\n    }\n\n    return mirrorDateProperties(ClockDate, NativeDate);\n}\n\nfunction addTimer(clock, timer) {\n    if (timer.func === undefined) {\n        throw new Error(\"Callback must be provided to timer calls\");\n    }\n\n    if (!clock.timers) {\n        clock.timers = {};\n    }\n\n    timer.id = uniqueTimerId++;\n    timer.createdAt = clock.now;\n    timer.callAt = clock.now + (parseInt(timer.delay) || (clock.duringTick ? 1 : 0));\n\n    clock.timers[timer.id] = timer;\n\n    if (addTimerReturnsObject) {\n        return {\n            id: timer.id,\n            ref: NOOP,\n            unref: NOOP\n        };\n    }\n\n    return timer.id;\n}\n\n\n/* eslint consistent-return: \"off\" */\nfunction compareTimers(a, b) {\n    // Sort first by absolute timing\n    if (a.callAt < b.callAt) {\n        return -1;\n    }\n    if (a.callAt > b.callAt) {\n        return 1;\n    }\n\n    // Sort next by immediate, immediate timers take precedence\n    if (a.immediate && !b.immediate) {\n        return -1;\n    }\n    if (!a.immediate && b.immediate) {\n        return 1;\n    }\n\n    // Sort next by creation time, earlier-created timers take precedence\n    if (a.createdAt < b.createdAt) {\n        return -1;\n    }\n    if (a.createdAt > b.createdAt) {\n        return 1;\n    }\n\n    // Sort next by id, lower-id timers take precedence\n    if (a.id < b.id) {\n        return -1;\n    }\n    if (a.id > b.id) {\n        return 1;\n    }\n\n    // As timer ids are unique, no fallback `0` is necessary\n}\n\nfunction firstTimerInRange(clock, from, to) {\n    var timers = clock.timers;\n    var timer = null;\n    var id, isInRange;\n\n    for (id in timers) {\n        if (timers.hasOwnProperty(id)) {\n            isInRange = inRange(from, to, timers[id]);\n\n            if (isInRange && (!timer || compareTimers(timer, timers[id]) === 1)) {\n                timer = timers[id];\n            }\n        }\n    }\n\n    return timer;\n}\n\nfunction firstTimer(clock) {\n    var timers = clock.timers;\n    var timer = null;\n    var id;\n\n    for (id in timers) {\n        if (timers.hasOwnProperty(id)) {\n            if (!timer || compareTimers(timer, timers[id]) === 1) {\n                timer = timers[id];\n            }\n        }\n    }\n\n    return timer;\n}\n\nfunction lastTimer(clock) {\n    var timers = clock.timers;\n    var timer = null;\n    var id;\n\n    for (id in timers) {\n        if (timers.hasOwnProperty(id)) {\n            if (!timer || compareTimers(timer, timers[id]) === -1) {\n                timer = timers[id];\n            }\n        }\n    }\n\n    return timer;\n}\n\nfunction callTimer(clock, timer) {\n    var exception;\n\n    if (typeof timer.interval === \"number\") {\n        clock.timers[timer.id].callAt += timer.interval;\n    } else {\n        delete clock.timers[timer.id];\n    }\n\n    try {\n        if (typeof timer.func === \"function\") {\n            timer.func.apply(null, timer.args);\n        } else {\n            /* eslint no-eval: \"off\" */\n            eval(timer.func);\n        }\n    } catch (e) {\n        exception = e;\n    }\n\n    if (!clock.timers[timer.id]) {\n        if (exception) {\n            throw exception;\n        }\n        return;\n    }\n\n    if (exception) {\n        throw exception;\n    }\n}\n\nfunction timerType(timer) {\n    if (timer.immediate) {\n        return \"Immediate\";\n    }\n    if (timer.interval !== undefined) {\n        return \"Interval\";\n    }\n    return \"Timeout\";\n}\n\nfunction clearTimer(clock, timerId, ttype) {\n    if (!timerId) {\n        // null appears to be allowed in most browsers, and appears to be\n        // relied upon by some libraries, like Bootstrap carousel\n        return;\n    }\n\n    if (!clock.timers) {\n        clock.timers = [];\n    }\n\n    // in Node, timerId is an object with .ref()/.unref(), and\n    // its .id field is the actual timer id.\n    if (typeof timerId === \"object\") {\n        timerId = timerId.id;\n    }\n\n    if (clock.timers.hasOwnProperty(timerId)) {\n        // check that the ID matches a timer of the correct type\n        var timer = clock.timers[timerId];\n        if (timerType(timer) === ttype) {\n            delete clock.timers[timerId];\n        } else {\n            throw new Error(\"Cannot clear timer: timer created with set\" + timerType(timer)\n                            + \"() but cleared with clear\" + ttype + \"()\");\n        }\n    }\n}\n\nfunction uninstall(clock, target) {\n    var method,\n        i,\n        l;\n    var installedHrTime = \"_hrtime\";\n\n    for (i = 0, l = clock.methods.length; i < l; i++) {\n        method = clock.methods[i];\n        if (method === \"hrtime\" && target.process) {\n            target.process.hrtime = clock[installedHrTime];\n        } else {\n            if (target[method] && target[method].hadOwnProperty) {\n                target[method] = clock[\"_\" + method];\n            } else {\n                try {\n                    delete target[method];\n                } catch (ignore) { /* eslint empty-block: \"off\" */ }\n            }\n        }\n    }\n\n    // Prevent multiple executions which will completely remove these props\n    clock.methods = [];\n}\n\nfunction hijackMethod(target, method, clock) {\n    var prop;\n\n    clock[method].hadOwnProperty = Object.prototype.hasOwnProperty.call(target, method);\n    clock[\"_\" + method] = target[method];\n\n    if (method === \"Date\") {\n        var date = mirrorDateProperties(clock[method], target[method]);\n        target[method] = date;\n    } else {\n        target[method] = function () {\n            return clock[method].apply(clock, arguments);\n        };\n\n        for (prop in clock[method]) {\n            if (clock[method].hasOwnProperty(prop)) {\n                target[method][prop] = clock[method][prop];\n            }\n        }\n    }\n\n    target[method].clock = clock;\n}\n\nvar timers = {\n    setTimeout: setTimeout,\n    clearTimeout: clearTimeout,\n    setImmediate: global.setImmediate,\n    clearImmediate: global.clearImmediate,\n    setInterval: setInterval,\n    clearInterval: clearInterval,\n    Date: Date\n};\n\nif (hrtimePresent) {\n    timers.hrtime = global.process.hrtime;\n}\n\nvar keys = Object.keys || function (obj) {\n    var ks = [];\n    var key;\n\n    for (key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            ks.push(key);\n        }\n    }\n\n    return ks;\n};\n\nexports.timers = timers;\n\nfunction createClock(now, loopLimit) {\n    loopLimit = loopLimit || 1000;\n\n    var clock = {\n        now: getEpoch(now),\n        hrNow: 0,\n        timeouts: {},\n        Date: createDate(),\n        loopLimit: loopLimit\n    };\n\n    clock.Date.clock = clock;\n\n    clock.setTimeout = function setTimeout(func, timeout) {\n        return addTimer(clock, {\n            func: func,\n            args: Array.prototype.slice.call(arguments, 2),\n            delay: timeout\n        });\n    };\n\n    clock.clearTimeout = function clearTimeout(timerId) {\n        return clearTimer(clock, timerId, \"Timeout\");\n    };\n\n    clock.setInterval = function setInterval(func, timeout) {\n        return addTimer(clock, {\n            func: func,\n            args: Array.prototype.slice.call(arguments, 2),\n            delay: timeout,\n            interval: timeout\n        });\n    };\n\n    clock.clearInterval = function clearInterval(timerId) {\n        return clearTimer(clock, timerId, \"Interval\");\n    };\n\n    clock.setImmediate = function setImmediate(func) {\n        return addTimer(clock, {\n            func: func,\n            args: Array.prototype.slice.call(arguments, 1),\n            immediate: true\n        });\n    };\n\n    clock.clearImmediate = function clearImmediate(timerId) {\n        return clearTimer(clock, timerId, \"Immediate\");\n    };\n\n    clock.tick = function tick(ms) {\n        ms = typeof ms === \"number\" ? ms : parseTime(ms);\n        var tickFrom = clock.now;\n        var tickTo = clock.now + ms;\n        var previous = clock.now;\n        var timer = firstTimerInRange(clock, tickFrom, tickTo);\n        var oldNow, firstException;\n\n        clock.duringTick = true;\n\n        function updateHrTime(newNow) {\n            clock.hrNow += (newNow - clock.now);\n        }\n\n        while (timer && tickFrom <= tickTo) {\n            if (clock.timers[timer.id]) {\n                updateHrTime(timer.callAt);\n                tickFrom = timer.callAt;\n                clock.now = timer.callAt;\n                try {\n                    oldNow = clock.now;\n                    callTimer(clock, timer);\n                    // compensate for any setSystemTime() call during timer callback\n                    if (oldNow !== clock.now) {\n                        tickFrom += clock.now - oldNow;\n                        tickTo += clock.now - oldNow;\n                        previous += clock.now - oldNow;\n                    }\n                } catch (e) {\n                    firstException = firstException || e;\n                }\n            }\n\n            timer = firstTimerInRange(clock, previous, tickTo);\n            previous = tickFrom;\n        }\n\n        clock.duringTick = false;\n        updateHrTime(tickTo);\n        clock.now = tickTo;\n\n        if (firstException) {\n            throw firstException;\n        }\n\n        return clock.now;\n    };\n\n    clock.next = function next() {\n        var timer = firstTimer(clock);\n        if (!timer) {\n            return clock.now;\n        }\n\n        clock.duringTick = true;\n        try {\n            clock.now = timer.callAt;\n            callTimer(clock, timer);\n            return clock.now;\n        } finally {\n            clock.duringTick = false;\n        }\n    };\n\n    clock.runAll = function runAll() {\n        var numTimers, i;\n        for (i = 0; i < clock.loopLimit; i++) {\n            if (!clock.timers) {\n                return clock.now;\n            }\n\n            numTimers = Object.keys(clock.timers).length;\n            if (numTimers === 0) {\n                return clock.now;\n            }\n\n            clock.next();\n        }\n\n        throw new Error(\"Aborting after running \" + clock.loopLimit + \" timers, assuming an infinite loop!\");\n    };\n\n    clock.runToLast = function runToLast() {\n        var timer = lastTimer(clock);\n        if (!timer) {\n            return clock.now;\n        }\n\n        return clock.tick(timer.callAt);\n    };\n\n    clock.reset = function reset() {\n        clock.timers = {};\n    };\n\n    clock.setSystemTime = function setSystemTime(systemTime) {\n        // determine time difference\n        var newNow = getEpoch(systemTime);\n        var difference = newNow - clock.now;\n        var id, timer;\n\n        // update 'system clock'\n        clock.now = newNow;\n\n        // update timers and intervals to keep them stable\n        for (id in clock.timers) {\n            if (clock.timers.hasOwnProperty(id)) {\n                timer = clock.timers[id];\n                timer.createdAt += difference;\n                timer.callAt += difference;\n            }\n        }\n    };\n\n    if (hrtimePresent) {\n        clock.hrtime = function (prev) {\n            if (Array.isArray(prev)) {\n                var oldSecs = (prev[0] + prev[1] / 1e9);\n                var newSecs = (clock.hrNow / 1000);\n                var difference = (newSecs - oldSecs);\n                var secs = fixedFloor(difference);\n                var nanosecs = fixedModulo(difference * 1e9, 1e9);\n                return [\n                    secs,\n                    nanosecs\n                ];\n            }\n            return [\n                fixedFloor(clock.hrNow / 1000),\n                fixedModulo(clock.hrNow * 1e6, 1e9)\n            ];\n        };\n    }\n\n    return clock;\n}\nexports.createClock = createClock;\n\nexports.install = function install(target, now, toFake, loopLimit) {\n    var i, l;\n\n    if (target instanceof Date) {\n        toFake = now;\n        now = target.getTime();\n        target = null;\n    }\n\n    if (typeof target === \"number\") {\n        toFake = now;\n        now = target;\n        target = null;\n    }\n\n    if (!target) {\n        target = global;\n    }\n\n    var clock = createClock(now, loopLimit);\n\n    clock.uninstall = function () {\n        uninstall(clock, target);\n    };\n\n    clock.methods = toFake || [];\n\n    if (clock.methods.length === 0) {\n        clock.methods = keys(timers);\n    }\n\n    for (i = 0, l = clock.methods.length; i < l; i++) {\n        if (clock.methods[i] === \"hrtime\") {\n            if (target.process && typeof target.process.hrtime === \"function\") {\n                hijackMethod(target.process, clock.methods[i], clock);\n            }\n        } else {\n            hijackMethod(target, clock.methods[i], clock);\n        }\n    }\n\n    return clock;\n};\n"]},"metadata":{},"sourceType":"script"}