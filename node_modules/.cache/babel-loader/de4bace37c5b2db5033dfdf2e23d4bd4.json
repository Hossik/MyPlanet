{"ast":null,"code":"\"use strict\";\n\nvar extend = require(\"./util/core/extend\");\n\nvar functionName = require(\"./util/core/function-name\");\n\nvar valueToString = require(\"./util/core/value-to-string\");\n\nvar slice = Array.prototype.slice;\nvar join = Array.prototype.join;\nvar useLeftMostCallback = -1;\nvar useRightMostCallback = -2;\n\nvar nextTick = function () {\n  if (typeof process === \"object\" && typeof process.nextTick === \"function\") {\n    return process.nextTick;\n  }\n\n  if (typeof setImmediate === \"function\") {\n    return setImmediate;\n  }\n\n  return function (callback) {\n    setTimeout(callback, 0);\n  };\n}();\n\nfunction getCallback(behavior, args) {\n  var callArgAt = behavior.callArgAt;\n\n  if (callArgAt >= 0) {\n    return args[callArgAt];\n  }\n\n  var argumentList;\n\n  if (callArgAt === useLeftMostCallback) {\n    argumentList = args;\n  }\n\n  if (callArgAt === useRightMostCallback) {\n    argumentList = slice.call(args).reverse();\n  }\n\n  var callArgProp = behavior.callArgProp;\n\n  for (var i = 0, l = argumentList.length; i < l; ++i) {\n    if (!callArgProp && typeof argumentList[i] === \"function\") {\n      return argumentList[i];\n    }\n\n    if (callArgProp && argumentList[i] && typeof argumentList[i][callArgProp] === \"function\") {\n      return argumentList[i][callArgProp];\n    }\n  }\n\n  return null;\n}\n\nfunction getCallbackError(behavior, func, args) {\n  if (behavior.callArgAt < 0) {\n    var msg;\n\n    if (behavior.callArgProp) {\n      msg = functionName(behavior.stub) + \" expected to yield to '\" + valueToString(behavior.callArgProp) + \"', but no object with such a property was passed.\";\n    } else {\n      msg = functionName(behavior.stub) + \" expected to yield, but no callback was passed.\";\n    }\n\n    if (args.length > 0) {\n      msg += \" Received [\" + join.call(args, \", \") + \"]\";\n    }\n\n    return msg;\n  }\n\n  return \"argument at index \" + behavior.callArgAt + \" is not a function: \" + func;\n}\n\nfunction callCallback(behavior, args) {\n  if (typeof behavior.callArgAt === \"number\") {\n    var func = getCallback(behavior, args);\n\n    if (typeof func !== \"function\") {\n      throw new TypeError(getCallbackError(behavior, func, args));\n    }\n\n    if (behavior.callbackAsync) {\n      nextTick(function () {\n        func.apply(behavior.callbackContext, behavior.callbackArguments);\n      });\n    } else {\n      func.apply(behavior.callbackContext, behavior.callbackArguments);\n    }\n  }\n}\n\nvar proto = {\n  create: function create(stub) {\n    var behavior = extend({}, proto);\n    delete behavior.create;\n    delete behavior.addBehavior;\n    delete behavior.createBehavior;\n    behavior.stub = stub;\n\n    if (stub.defaultBehavior && stub.defaultBehavior.promiseLibrary) {\n      behavior.promiseLibrary = stub.defaultBehavior.promiseLibrary;\n    }\n\n    return behavior;\n  },\n  isPresent: function isPresent() {\n    return typeof this.callArgAt === \"number\" || this.exception || typeof this.returnArgAt === \"number\" || this.returnThis || typeof this.throwArgAt === \"number\" || this.fakeFn || this.returnValueDefined;\n  },\n  invoke: function invoke(context, args) {\n    callCallback(this, args);\n\n    if (this.exception) {\n      throw this.exception;\n    } else if (typeof this.returnArgAt === \"number\") {\n      return args[this.returnArgAt];\n    } else if (this.returnThis) {\n      return context;\n    } else if (typeof this.throwArgAt === \"number\") {\n      if (args.length < this.throwArgAt) {\n        throw new TypeError(\"throwArgs failed: \" + this.throwArgAt + \" arguments required but only \" + args.length + \" present\");\n      }\n\n      throw args[this.throwArgAt];\n    } else if (this.fakeFn) {\n      return this.fakeFn.apply(context, args);\n    } else if (this.resolve) {\n      return (this.promiseLibrary || Promise).resolve(this.returnValue);\n    } else if (this.reject) {\n      return (this.promiseLibrary || Promise).reject(this.returnValue);\n    } else if (this.callsThrough) {\n      return this.stub.wrappedMethod.apply(context, args);\n    }\n\n    return this.returnValue;\n  },\n  onCall: function onCall(index) {\n    return this.stub.onCall(index);\n  },\n  onFirstCall: function onFirstCall() {\n    return this.stub.onFirstCall();\n  },\n  onSecondCall: function onSecondCall() {\n    return this.stub.onSecondCall();\n  },\n  onThirdCall: function onThirdCall() {\n    return this.stub.onThirdCall();\n  },\n  withArgs: function withArgs()\n  /* arguments */\n  {\n    throw new Error(\"Defining a stub by invoking \\\"stub.onCall(...).withArgs(...)\\\" \" + \"is not supported. Use \\\"stub.withArgs(...).onCall(...)\\\" \" + \"to define sequential behavior for calls with certain arguments.\");\n  }\n};\n\nfunction createAsyncVersion(syncFnName) {\n  return function () {\n    var result = this[syncFnName].apply(this, arguments);\n    this.callbackAsync = true;\n    return result;\n  };\n} // create asynchronous versions of callsArg* and yields* methods\n\n\nObject.keys(proto).forEach(function (method) {\n  // need to avoid creating anotherasync versions of the newly added async methods\n  if (method.match(/^(callsArg|yields)/) && !method.match(/Async/)) {\n    proto[method + \"Async\"] = createAsyncVersion(method);\n  }\n});\n\nfunction createBehavior(behaviorMethod) {\n  return function () {\n    this.defaultBehavior = this.defaultBehavior || proto.create(this);\n    this.defaultBehavior[behaviorMethod].apply(this.defaultBehavior, arguments);\n    return this;\n  };\n}\n\nfunction addBehavior(stub, name, fn) {\n  proto[name] = function () {\n    fn.apply(this, [this].concat([].slice.call(arguments)));\n    return this.stub || this;\n  };\n\n  stub[name] = createBehavior(name);\n}\n\nproto.addBehavior = addBehavior;\nproto.createBehavior = createBehavior;\nmodule.exports = proto;","map":{"version":3,"sources":["/home/hoss/my App/my-app/node_modules/sinon/lib/sinon/behavior.js"],"names":["extend","require","functionName","valueToString","slice","Array","prototype","join","useLeftMostCallback","useRightMostCallback","nextTick","process","setImmediate","callback","setTimeout","getCallback","behavior","args","callArgAt","argumentList","call","reverse","callArgProp","i","l","length","getCallbackError","func","msg","stub","callCallback","TypeError","callbackAsync","apply","callbackContext","callbackArguments","proto","create","addBehavior","createBehavior","defaultBehavior","promiseLibrary","isPresent","exception","returnArgAt","returnThis","throwArgAt","fakeFn","returnValueDefined","invoke","context","resolve","Promise","returnValue","reject","callsThrough","wrappedMethod","onCall","index","onFirstCall","onSecondCall","onThirdCall","withArgs","Error","createAsyncVersion","syncFnName","result","arguments","Object","keys","forEach","method","match","behaviorMethod","name","fn","concat","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar extend = require(\"./util/core/extend\");\nvar functionName = require(\"./util/core/function-name\");\nvar valueToString = require(\"./util/core/value-to-string\");\n\nvar slice = Array.prototype.slice;\nvar join = Array.prototype.join;\nvar useLeftMostCallback = -1;\nvar useRightMostCallback = -2;\n\nvar nextTick = (function () {\n    if (typeof process === \"object\" && typeof process.nextTick === \"function\") {\n        return process.nextTick;\n    }\n\n    if (typeof setImmediate === \"function\") {\n        return setImmediate;\n    }\n\n    return function (callback) {\n        setTimeout(callback, 0);\n    };\n})();\n\nfunction getCallback(behavior, args) {\n    var callArgAt = behavior.callArgAt;\n\n    if (callArgAt >= 0) {\n        return args[callArgAt];\n    }\n\n    var argumentList;\n\n    if (callArgAt === useLeftMostCallback) {\n        argumentList = args;\n    }\n\n    if (callArgAt === useRightMostCallback) {\n        argumentList = slice.call(args).reverse();\n    }\n\n    var callArgProp = behavior.callArgProp;\n\n    for (var i = 0, l = argumentList.length; i < l; ++i) {\n        if (!callArgProp && typeof argumentList[i] === \"function\") {\n            return argumentList[i];\n        }\n\n        if (callArgProp && argumentList[i] &&\n            typeof argumentList[i][callArgProp] === \"function\") {\n            return argumentList[i][callArgProp];\n        }\n    }\n\n    return null;\n}\n\nfunction getCallbackError(behavior, func, args) {\n    if (behavior.callArgAt < 0) {\n        var msg;\n\n        if (behavior.callArgProp) {\n            msg = functionName(behavior.stub) +\n                \" expected to yield to '\" + valueToString(behavior.callArgProp) +\n                \"', but no object with such a property was passed.\";\n        } else {\n            msg = functionName(behavior.stub) +\n                \" expected to yield, but no callback was passed.\";\n        }\n\n        if (args.length > 0) {\n            msg += \" Received [\" + join.call(args, \", \") + \"]\";\n        }\n\n        return msg;\n    }\n\n    return \"argument at index \" + behavior.callArgAt + \" is not a function: \" + func;\n}\n\nfunction callCallback(behavior, args) {\n    if (typeof behavior.callArgAt === \"number\") {\n        var func = getCallback(behavior, args);\n\n        if (typeof func !== \"function\") {\n            throw new TypeError(getCallbackError(behavior, func, args));\n        }\n\n        if (behavior.callbackAsync) {\n            nextTick(function () {\n                func.apply(behavior.callbackContext, behavior.callbackArguments);\n            });\n        } else {\n            func.apply(behavior.callbackContext, behavior.callbackArguments);\n        }\n    }\n}\n\nvar proto = {\n    create: function create(stub) {\n        var behavior = extend({}, proto);\n        delete behavior.create;\n        delete behavior.addBehavior;\n        delete behavior.createBehavior;\n        behavior.stub = stub;\n\n        if (stub.defaultBehavior && stub.defaultBehavior.promiseLibrary) {\n            behavior.promiseLibrary = stub.defaultBehavior.promiseLibrary;\n        }\n\n        return behavior;\n    },\n\n    isPresent: function isPresent() {\n        return (typeof this.callArgAt === \"number\" ||\n                this.exception ||\n                typeof this.returnArgAt === \"number\" ||\n                this.returnThis ||\n                typeof this.throwArgAt === \"number\" ||\n                this.fakeFn ||\n                this.returnValueDefined);\n    },\n\n    invoke: function invoke(context, args) {\n        callCallback(this, args);\n\n        if (this.exception) {\n            throw this.exception;\n        } else if (typeof this.returnArgAt === \"number\") {\n            return args[this.returnArgAt];\n        } else if (this.returnThis) {\n            return context;\n        } else if (typeof this.throwArgAt === \"number\") {\n            if (args.length < this.throwArgAt) {\n                throw new TypeError(\n                    \"throwArgs failed: \" + this.throwArgAt\n                    + \" arguments required but only \" + args.length\n                    + \" present\"\n                );\n            }\n            throw args[this.throwArgAt];\n        } else if (this.fakeFn) {\n            return this.fakeFn.apply(context, args);\n        } else if (this.resolve) {\n            return (this.promiseLibrary || Promise).resolve(this.returnValue);\n        } else if (this.reject) {\n            return (this.promiseLibrary || Promise).reject(this.returnValue);\n        } else if (this.callsThrough) {\n            return this.stub.wrappedMethod.apply(context, args);\n        }\n        return this.returnValue;\n    },\n\n    onCall: function onCall(index) {\n        return this.stub.onCall(index);\n    },\n\n    onFirstCall: function onFirstCall() {\n        return this.stub.onFirstCall();\n    },\n\n    onSecondCall: function onSecondCall() {\n        return this.stub.onSecondCall();\n    },\n\n    onThirdCall: function onThirdCall() {\n        return this.stub.onThirdCall();\n    },\n\n    withArgs: function withArgs(/* arguments */) {\n        throw new Error(\n            \"Defining a stub by invoking \\\"stub.onCall(...).withArgs(...)\\\" \" +\n            \"is not supported. Use \\\"stub.withArgs(...).onCall(...)\\\" \" +\n            \"to define sequential behavior for calls with certain arguments.\"\n        );\n    }\n};\n\nfunction createAsyncVersion(syncFnName) {\n    return function () {\n        var result = this[syncFnName].apply(this, arguments);\n        this.callbackAsync = true;\n        return result;\n    };\n}\n\n// create asynchronous versions of callsArg* and yields* methods\nObject.keys(proto).forEach(function (method) {\n    // need to avoid creating anotherasync versions of the newly added async methods\n    if (method.match(/^(callsArg|yields)/) && !method.match(/Async/)) {\n        proto[method + \"Async\"] = createAsyncVersion(method);\n    }\n});\n\nfunction createBehavior(behaviorMethod) {\n    return function () {\n        this.defaultBehavior = this.defaultBehavior || proto.create(this);\n        this.defaultBehavior[behaviorMethod].apply(this.defaultBehavior, arguments);\n        return this;\n    };\n}\n\nfunction addBehavior(stub, name, fn) {\n    proto[name] = function () {\n        fn.apply(this, [this].concat([].slice.call(arguments)));\n        return this.stub || this;\n    };\n\n    stub[name] = createBehavior(name);\n}\n\nproto.addBehavior = addBehavior;\nproto.createBehavior = createBehavior;\nmodule.exports = proto;\n"]},"metadata":{},"sourceType":"script"}